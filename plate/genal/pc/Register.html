<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>丹尼斯-手机注册页面</title>
    <link rel="stylesheet" type="text/css" href="/css/static/css/public.css">
    <script type="text/javascript" src="/css/static/js/jquery-1.8.3.min.js"></script>
    <script charset="gb2312">
    	function sendUsernameData()
    	{
    		var username = document.getElementById("user_name").value;
    		var sex = getSex();
    		var card = document.getElementById("card").value;
    			
    	}
    	
      function getSex(){
        var value="";
  		  radio=document.getElementsByName("sex");
  			for(var i=0;i<radio.length;i++){
					if(radio[i].checked==true){
	 					 value=radio[i].value;
	 					 break;
					}
  			}
  				return value;
			}
	  
	  String.prototype.trim = function() {
		  var str = this,
		  str = str.replace(/^\s\s*/, ''),
		  ws = /\s/,
		  i = str.length;
		  while (ws.test(str.charAt(--i)));
		  return str.slice(0, i + 1);
	  }

	  // 验证身份证号
	  function CheckIdentification(idcard) 
	  { 
		  /*
		var Errors=new Array("验证通过!","身份证号码位数不对!","身份证号码出生日期超出范围或含有非法字符!","身份证号码校验错误!","身份证地区非法!"); 
		*/
		var Errors=new Array(1, 2, 3, 4, 5);
		var area={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"xinjiang",71:"台湾",81:"香港",82:"澳门",91:"国外"} 
		var idcard,Y,JYM; 
		var S,M; 
		var idcard_array = new Array(); 
		idcard_array = idcard.split(""); 
		if(area[parseInt(idcard.substr(0,2))]==null) return Errors[4]; 
		switch(idcard.length)
		{ 
			case 15: 
				if ((parseInt(idcard.substr(6,2))+1900) % 4 == 0 || ((parseInt(idcard.substr(6,2))+1900) % 100 == 0 && (parseInt(idcard.substr(6,2))+1900) % 4 == 0 )){ 
				ereg = /^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}$/;//测试出生日期的合法性 
				} 
				else{ 
				ereg = /^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}$/;//测试出生日期的合法性 
				} 
				if(ereg.test(idcard)) 
					return Errors[0]; 
				else 
					return Errors[2]; 
				break; 
			case 18: 
				if( parseInt(idcard.substr(6,4)) % 4 == 0 || ( parseInt(idcard.substr(6,4)) % 100 == 0 && parseInt(idcard.substr(6,4))%4 == 0 )){ 
				ereg = /^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9Xx]$/;//闰年出生日期的合法性正则表达式 
				} 
				else{ 
				ereg = /^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9Xx]$/;//平年出生日期的合法性正则表达式 
				} 
				if(ereg.test(idcard)){ 
					S = (parseInt(idcard_array[0]) + parseInt(idcard_array[10])) * 7 + (parseInt(idcard_array[1]) + parseInt(idcard_array[11])) * 9 + (parseInt(idcard_array[2]) + parseInt(idcard_array[12])) * 10 + (parseInt(idcard_array[3]) + parseInt(idcard_array[13])) * 5 + (parseInt(idcard_array[4]) + parseInt(idcard_array[14])) * 8 + (parseInt(idcard_array[5]) + parseInt(idcard_array[15])) * 4 + (parseInt(idcard_array[6]) + parseInt(idcard_array[16])) * 2 + parseInt(idcard_array[7]) * 1 + parseInt(idcard_array[8]) * 6 + parseInt(idcard_array[9]) * 3 ; 
					Y = S % 11; 
					M = "F"; 
					JYM = "10X98765432"; 
					M = JYM.substr(Y,1); 
					if(M == idcard_array[17]) 
						return Errors[0]; 
					else 
						return Errors[3]; 
				} 
				else 
					return Errors[2]; 
					break; 
			default: 
				return Errors[1]; 
				break; 
		} 
	  } 
		

	  // 验证手机号
	  function CheckMobile(mobile)
	  {
		  var reg_mobile = /^1[3|4|5|6|7|8|9][0-9]{1}[0-9]{8}$/;  
          return reg_mobile.test(mobile); 
	  }

	  // 验证电子邮箱
	  function CheckEmail(email)
	  {
		  var reg_email =  /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;  
          return reg_email.test(email);
	  }

	  // 检查注册信息
	  function CheckInput()
	  {
		  var user_name = document.getElementById("user_name").value;
		  var id_number = document.getElementById("id_number").value;
		  var mobile = document.getElementById("mobile").value;
		  var email = document.getElementById("email").value;
		  if (user_name == null || user_name.trim() == "")
		  {
			  alert('姓名不能为空！');
			  return false;
		  }
		  if (id_number == null || id_number.trim() == "")
		  {
			  alert('身份证号不能为空！');
			  return false;
		  }
		  if (CheckIdentification(id_number) != 1)
		  {
			  alert('身份证号格式不正确！');
		  }
		  if (mobile == null || mobile.trim() == "")
		  {
			  alert('手机不能为空！');
			  return false;
		  }
		  if (!CheckMobile(mobile))
		  {
			  alert('手机格式不正确！');
			  return false;
		  }
		  if (email == null || email.trim() == "")
		  {
			  alert('邮箱不能为空！');
			  return false;
		  }
		  if (!CheckEmail(email))
		  {
			  alert('邮箱格式不正确！');
			  return false;
		  }
		  document.getElementById("form_reg").submit();
	  }
    </script>
</head>

<body onload="setup(); promptinfo();">
	<div class="top_login">
        
    </div>
    <div class="mobile_register">
        <div class="reg_top"><img src="/css/static/images/reg_top_bg_01.jpg" width="100%" height="auto"></div>
        <span class="clear"></span>

        <div class="reg_mian">
            <form class="form_reg" id="form_reg" method="post" action="/pronline/Msg?FunName@Denis_Register">
				<input type="hidden"  name="getarg"  id="getarg" value="[#getarg#]"/>
				<input type="hidden"  name="ip"  id="ip" value="[#ip#]"/>
				<input type="hidden"  name="port"  id="port" value="[#port#]"/>
                <table class="tb_reg">
                    <tr>
                        <td><label class="l_label"><i>*</i>姓名：</label></td>
                        <td colspan="2" align="center">
                            <input class="txt" id="user_name" name="user_name" type="text">
                        </td>
                    </tr>
                    <tr>
                        <td><label class="l_label"><i>*</i>性别：</label></td>
                        <td align="center">
                            <input id="man" name="sex" type="radio" value="男" checked>
                            <label class="r_label" for="man">男</label>
                        </td>
                        <td align="center">
                            <input id="woman" name="sex" type="radio" value="女">
                            <label class="r_label" for="woman">女</label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label class="l_label"><i>*</i>身份证号：</label></td>
                        <td colspan="2" align="center">
                            <input class="txt" id="id_number" name="id_number" type="text"></td>
                    </tr>
                    <tr>
                        <td>
                            <label class="l_label"><i>*</i>手机：</label></td>
                        <td colspan="2" align="center">
                            <input class="txt" id="mobile" name="mobile" type="text"></td>
                    </tr>
                    <tr>
                        <td>
                            <label class="l_label"><i>*</i>邮箱：</label></td>
                        <td colspan="2" align="center">
                            <input class="txt" id="email" name="email" type="text"></td>
                    </tr>
                    <tr height="15"></tr>
                    <tr>
                        <td align="center">
                            <input class="form_btn" id="sub_btn" type="button" />
                        </td>
                        <td colspan="2" align="center">
                            <input class="form_btn" id="reg" type="submit" value="" onclick="CheckInput()"/>
                        </td>
                    </tr>
                </table>

            </form>
		
        </div>
        <span class="clear"></span>
        <div class="reg_footer"><img src="/css/static/images/reg_footer_02.jpg" width="100%" height="auto"></div>
    </div>

</body>
</html>
<script type="text/javascript" src="/css/static/js/jquery-1.8.3.min.js"></script>
<!--<script type="text/javascript" src="static/js/geo.js"></script>

<script type="text/javascript">
    //这个函数是必须的，因为在geo.js里每次更改地址时会调用此函数
    function promptinfo() {
        var address = document.getElementById('address');
        var s1 = document.getElementById('s1');
        var s2 = document.getElementById('s2');
        var s3 = document.getElementById('s3');
    }
</script>-->



























