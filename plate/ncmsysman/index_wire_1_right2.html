<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>首页</title>
    <link rel="stylesheet" type="text/css" href="/newver/resources/css/ext-all.css" /> 
        <style type="text/css">
        .icon-grid {
            background-image:url(/newver/resources/themes/images/share/grid.png) !important;
        }
        .add {
            background-image:url(/newver/resources/themes/images/share/add.gif) !important;
        }
        .option {
            background-image:url(/newver/resources/themes/images/share/plugin.gif) !important;
        }
        .remove {
            background-image:url(/newver/resources/themes/images/share/delete.gif) !important;
        }
        .exp {
            background-image:url(/newver/resources/themes/images/share/application_go.png) !important;
        }
        .accept {
            background-image:url(/newver/resources/themes/images/share/accept.png) !important;
        }
     .x-tab-default-top button, .x-tab-default-top.x-tab-inner {
		  height: 16px !important;
		  line-height: 16px;
	    }

    </style>
<style type="text/css">   
   .x-selectable, .x-selectable * {   
    -moz-user-select: text!important;   
    -khtml-user-select: text!important;   
}   
</style>
      
    <script type="text/javascript" src="/newver/resources/js/ext-all.js"></script>
    
  <script>  


Ext.Loader.setConfig({enabled: true});
Ext.Loader.setPath('Ext.ux', '/newver/ux/');
Ext.require([
    'Ext.form.*',
    'Ext.window.*',
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.util.*',
    'Ext.window.MessageBox',
    'Ext.toolbar.Paging',
    'Ext.ux.PreviewPlugin',
    'Ext.tree.*',
//    'Ext.ModelManager',
//    'Ext.tip.QuickTipManager'
]);
var store;
var temp_id='';
var preid='';

 function reflash(){
  var did1=document.getElementById("form1").did.value;

  var gid=document.getElementById("form1").groupid.value;
  var ip1=document.getElementById("form1").ip1.value;
  var dispname1=document.getElementById("form1").dispname1.value;
  var servicecode1=document.getElementById("form1").servicecode1.value;
  var address1=document.getElementById("form1").address1.value;
  var area1=document.getElementById("form1").area1.value;
  var corpstate=document.getElementById('form1').lxstate.value;
  var keyword1=document.getElementById('form1').ap_select.value;
  store.load({params: {wlan_Bssid: gid,wlan_ssid:ip1,wlan_channel:dispname1,wlan_signal:servicecode1,wlan_packet:address1,wlan_srate:area1,wlan_uflow:did1,wlan_dflow:corpstate,ap_select:keyword1}});  
  }





 Ext.define('TreeCombox', {  
    extend: 'Ext.form.field.Picker',  
    xtype: 'treecombox',  
    triggerCls: Ext.baseCSSPrefix + 'form-arrow-trigger',  
    config: {  
        displayField: null,  
        columns: null,  
        rootVisible: false,  
        selectOnTab: true,  
        firstSelected: false,  
        maxPickerWidth: 119,  
        maxPickerHeight: 360,  
        minPickerHeight: 100  
    },  
    editable: false,  
    initComponent: function() {  
        var me = this;  
        me.callParent(arguments);  
        this.addEvents('select');  
        me.store.on('load', me.onLoad, me);  
          
    },  
    createPicker: function() {  
        var me = this,  
            picker = Ext.create('Ext.tree.Panel', {  
                store: me.store,  
                floating: true,  
                hidden: true,  
                width: me.maxPickerWidth,  
                displayField: me.displayField,  
                columns: me.columns,  
                maxHeight: me.maxTreeHeight,  
                shadow: false, 
                rootVisible:false,  
                manageHeight: false,  
                listeners: {  
                    itemclick: Ext.bind(me.onItemClick, me)  
                },  
                viewConfig: {  
                    listeners: {  
                        render: function(view) {  
                            view.getEl().on('keypress', me.onPickerKeypress, me);  
                        }  
                    }  
                }  
            }),  
            view = picker.getView();  
  
        view.on('render', me.setPickerViewStyles, me);  
        if (Ext.isIE9 && Ext.isStrict) {  
            view.on('highlightitem', me.repaintPickerView, me);  
            view.on('unhighlightitem', me.repaintPickerView, me);  
            view.on('afteritemexpand', me.repaintPickerView, me);  
            view.on('afteritemcollapse', me.repaintPickerView, me);  
        }  
        return picker;  
    },  
    setPickerViewStyles: function(view) {  
        view.getEl().setStyle({  
            'min-height': this.minPickerHeight + 'px',  
            'max-height': this.maxPickerHeight + 'px'  
        });  
    },  
    repaintPickerView: function() {  
        var style = this.picker.getView().getEl().dom.style;  
        style.display = style.display;  
    },  
    alignPicker: function() {  
        var me = this,  
            picker;  
  
        if (me.isExpanded) {  
            picker = me.getPicker();  
            if (me.matchFieldWidth) {  
                picker.setWidth(this.picker.getWidth());  
            }  
            if (picker.isFloating()) {  
                me.doAlign();  
            }  
        }  
    },  
    onItemClick: function(view, record, node, rowIndex, e) {  

  
//    	alert(record.data.id);
        this.selectItem(record);  
    },  
    onPickerKeypress: function(e, el) {  
        var key = e.getKey();  
  
        if(key === e.ENTER || (key === e.TAB && this.selectOnTab)) {  
            this.selectItem(this.picker.getSelectionModel().getSelection()[0]);  
        }  
    },  
    selectItem: function(record) {  
        var me = this; 
     document.getElementById("form1").mid.value=record.get('id');
     temp_id=record.get('id');
     me.setValue(record.get('text'));  
        me.picker.hide();  
        me.inputEl.focus();  
        me.fireEvent('select', me, record);

    },  
    onExpand: function() {  
        var me = this,  
            picker = me.picker,  
            store = picker.store,  
            value = me.value;  
        if(value) {  
            var node = store.getNodeById(value);  
            if(node)  
                picker.selectPath(node.getPath());  
        } else {  
            var hasOwnProp = me.store.hasOwnProperty('getRootNode');  
            if(hasOwnProp)  
                picker.getSelectionModel().select(store.getRootNode());  
        }  
  
        Ext.defer(function() {  
            picker.getView().focus();  
        }, 1);  
    },  
    setValue: function(value) {  
        var me = this,record;  
        me.value = value;  
        if (me.store.loading) {  
            return me;  
        }  
        try{  
            //var hasOwnProp = me.store.hasOwnProperty('getRootNode');  
            //record = value ? me.store.getNodeById(value) : (hasOwnProp ? me.store.getRootNode() : null);  
            //me.setRawValue(record ? record.get(this.displayField) : '');  
            var i = value.indexOf(">");
            var j = value.indexOf("</");
            if(i != -1 && j != -1)
            {
            		me.setRawValue(value.substring(i+1,j));
            }
            else 
            {
            		me.setRawValue(value);
            }
        }catch(e){  
            me.setRawValue('');  
        }  
  
        return me;  
    },  
    getValue: function() {  
        return this.value;  
    },  
    onLoad: function(store,node,records) {  
        var value = this.value;  
        if (value) {  
            this.setValue(value);  
        }else{  
            if(this.firstSelected){  
                if(records && records.length > 0){  
                    var record = records[0];  
                    this.setValue(record.get(this.valueField));  
                }  
            }  
        }  
    },  
    getSubmitData: function() {  
        var me = this,  
            data = null;  
        if (!me.disabled && me.submitValue) {  
            data = {};  
            data[me.getName()] = '' + me.getValue();  
        }  
        return data;  
    },  
    onTriggerClick: function() {  
        var me = this;  
        //me.store.load();  
        if (!me.readOnly && !me.disabled) {  
            if (me.isExpanded) {  
                me.collapse();  
            } else {  
                me.expand();  
            }  
            me.inputEl.focus();  
        }  
    }  
});
      store_classtree=Ext.create('Ext.data.TreeStore', 
				{   
						fields: ['text'],
						autoLoad : true,
						proxy: 
						{   
							type: 'ajax',   

						url: '/pronline/Msg?FunName@ncsTreeGroup_comp_v4'  
						}  
				}
			);


Ext.define('Ext.ux.grid.plugin.RowEditing', {   
   extend: 'Ext.grid.plugin.RowEditing',   
   alias: 'plugin.ux.rowediting',    
      
   /**  
    * 是否添加记录在当前位置<br/>  
    * whether add record at current rowIndex.<br/>  
    * see {@link #cfg-addPosition}  
    * @cfg {Boolean}  
    */  
   addInPlace: false,   
      
   addPosition: 0,   
      
   /**  
    * 是否点击触发事件,0代表不触发,1代表单击,2代表双击,默认为双击.<br/>  
    * The number of clicks on a grid required to display the editor (disable:0,click:1,dblclick:2)  
    * @cfg {Number}  
    */  
   clicksToEdit:2,   
      
   /**  
    * 是否在取消编辑的时候自动删除添加的记录  
    * if true, auto remove phantom record on cancel,default is true.  
    * @cfg {Boolean}  
    */  
   autoRecoverOnCancel: true,   
      
   /**  
    * adding flag  
    * @private  
    * @type Boolean  
    */  
   adding: false,   
      
   autoCancel:true,   
      
   /**  
    * when add record, hide error tooltip for the first time  
    * @private  
    * @type Boolean  
    */  
   hideTooltipOnAdd: true,   
      
   /**  
    * register canceledit event && relay canceledit event to grid  
    * @param {Ext.grid.Panel} grid  
    * @override  
    * @private  
    */  
   init:function(grid){   
       var me = this;   
       /**  
        * 取消编辑事件.<br/>  
        * Fires canceledit event.And will be relayEvents to Grid.<br/>  
        * @see {@link Ext.ux.grid.RowActions#event-beforeaction} <br/>  
        * @event canceledit  
        * @param {Object} context  
        */  
       me.addEvents('canceledit');   
       me.callParent(arguments);   
       grid.addEvents('canceledit');   
       grid.relayEvents(me, ['canceledit']);   
   },   
      
   /**  
    * 提供默认的Editor配置  
    *      @example  
    *      {header:'手机',dataIndex:'phone',fieldType:'numberfield',field:{allowBlank:true}}  
    * provide default field config  
    * @param {String} fieldType 可选值:numberfield,checkboxfield,passwordField  
    * @return {Object}   
    * @protected  
    */  
   getFieldCfg: function(fieldType){   
        switch(fieldType){   
            case 'passwordField':   
                return {   
                    xtype: 'textfield',   
                    inputType: 'password',   
                    allowBlank:false  
                }   
            case 'numberfield':   
                return {   
                    xtype: 'numberfield',   
                    hideTrigger: true,   
                    keyNavEnabled: false,   
                    mouseWheelEnabled: false,   
                    allowBlank:false  
                }   
                   
            case 'checkboxfield':   
                return {   
                    xtype: 'checkboxfield',   
                    inputValue: 'true',   
                    uncheckedValue: 'false'  
                }   
            }   
    },   
       
    /**  
     * Help to config field,just giving a fieldType and field as additional cfg.  
     * see {@link #getFieldCfg}  
     * @private  
     * @override  
     */  
    getEditor: function() {   
        var me = this;   
  
        if (!me.editor) {   
            Ext.each(me.grid.headerCt.getGridColumns(),function(item,index,allItems){   
                if(item.fieldType){   
                    item.field = Ext.applyIf(item.field||{},this.getFieldCfg(item.fieldType))   
                }   
            },this)   
            // keep a reference for custom editor..   
            me.editor = me.initEditor();   
        }   
        me.editor.editingPlugin = me   
        return me.editor;   
    },   
       
    /**  
     * if clicksToEdit===0 then mun the click/dblclick event  
     * @private  
     * @override  
     */  
    initEditTriggers: function(){   
        var me = this    
        var clickEvent = me.clicksToEdit === 1 ? 'click' : 'dblclick'  
        me.callParent(arguments);    
        if(me.clicksToEdit === 0){   
            me.mun(me.view, 'cell' + clickEvent, me.startEditByClick, me);    
        }   
    },   
       
    /**  
     * 添加记录  
     * add a record and start edit it (will not sync store)  
     * @param {Model/Object} data Data to initialize the Model's fields with <br/>  
     * @param {Object} config see {@link #cfg-addPosition}.   
     */  
    startAdd: function(data,config){   
        var me = this;   
        var cfg = Ext.apply({   
            addInPlace: this.addInPlace,   
            addPosition: this.addPosition,   
            colIndex: 0   
        },config)   
           
        //find the position   
        var position;   
        if(cfg.addInPlace){   
            var selected = me.grid.getSelectionModel().getSelection()   
            if(selected && selected.length>0){   
                position = me.grid.store.indexOf(selected[0])    
                console.log('a',position)   
                position += (cfg.addPosition<=0) ? 0: 1   
            }else{   
                position = 0   
            }   
        }else{   
            position = (cfg.addPosition==-1 ? me.grid.store.getCount() : cfg.addPosition) || 0   
        }   
           
        var record = data.isModel ? data : me.grid.store.model.create(data);   
        var autoSync = me.grid.store.autoSync;   
        me.grid.store.autoSync = false;   
        me.grid.store.insert(position, record);   
        me.grid.store.autoSync = autoSync;   
          
        me.adding = true  
        me.startEdit(position,cfg.colIndex);   
           
        //since autoCancel:true dont work for me   
        if(me.hideTooltipOnAdd && me.getEditor().hideToolTip){   
            me.getEditor().hideToolTip()   
        }   
    },   
       
    /**  
     * 编辑之前,自动取消编辑  
     * Modify: if is editing, cancel first.  
     * @private  
     * @override  
     */  
    startEdit: function(record, columnHeader) {   
        var me = this;   
        if(me.editing){   
            me.cancelEdit();    
        }  
 
        me.callParent(arguments);   
        Ext.getCmp('groupid').setValue(record.get('groupname'));
        temp_id=record.get('groupid');

    },   
       
    /**  
     * 修改adding的状态值  
     * Modify: set adding=false  
     * @private  
     * @override  
     */  
    completeEdit: function() {   
        var me = this;   
        if (me.editing && me.validateEdit()) {   
            me.editing = false;   
            me.fireEvent('edit', me.context);   
        }   
        me.adding = false 


        var scode=me.context.record.data.username;
        var sname=me.context.record.data.dispname;
        var scontact=me.context.record.data.contact;
        var stelphone=me.context.record.data.telphone;
        var saddress=me.context.record.data.address;
        var userid= me.context.record.data.userid;

        var gid='';

//
        if(me.context.record.data.groupname!=''){
           gid=temp_id;
        }
        var gid2=document.getElementById("form1").groupid.value;
        var corpstate=document.getElementById('form1').lxstate.value;
        var keyword1=document.getElementById('form1').keyword.value;
   
   
      
        if(scode==''||scode=='请输入单位编号'||sname==''||sname=='请输入单位名称'||gid==''||gid=='0'){
        	alert('单位编码和单位名称不能为空和单位组不能为空');
//        	reflash();
        	return ;
        }

  //      alert(me.context.record.data.groupname);

      store.load({params: {update:"update",userid:userid,groupid1: gid,groupid:gid2,lxstate:corpstate,keyword:keyword1,username:scode,dispname:sname,address:saddress,telphone:stelphone,contact:scontact}});
  
  //      reflash();
        
         
    },   
       
    /**  
     * 取消编辑  
     * 1.fireEvent 'canceledit'  
     * 2.when autoRecoverOnCancel is true, if record is phantom then remove it  
     * @private  
     * @override  
     */  
    cancelEdit: function(){
    
        var me = this; 

        if (me.editing) {   
            me.getEditor().cancelEdit();   
            me.editing = false;   
            me.fireEvent('canceledit', me.context);    
            if (me.autoRecoverOnCancel){ 
     var temp=me.context.record.data.groupname;  
                if((me.adding)||(temp=='请输入案件编号')||(temp=='')){   
                    me.context.record.store.remove(me.context.record);   
                    me.adding = false  
                }else{   
                    //不需要reject,因为Editor没有更改record.   
                    //me.context.record.reject()   
                }   
            }   
        }  


         
    }   
}) ; 

    var rowEditing = Ext.create('Ext.ux.grid.plugin.RowEditing', {
    	      pluginId:'rowEditing', 
            saveBtnText: "保存", 
            cancelBtnText: "取消", 
            autoRecoverOnCancel:true,
            autoCancel: true
 //       clicksToMoveEditor: 1,
 //       autoCancel: false
    });




Ext.onReady(function(){

    var aaa=screen.width;
    if(aaa>1440) aaa=1440;
    if(aaa<1024) aaa=1024;
    aaa=aaa-241;
 //wff	  
   Ext.define('EimData', {
        extend: 'Ext.data.Model',
        fields: [
            {name:'tr_node',type:'int'}
        ],
        idProperty: 'id'
   });
   store_m = Ext.create('Ext.data.Store', {
        model: 'EimData',
        proxy: {
            type: 'ajax',
            url: '/pronline/Msg?FunName@ncwlanFirstMenuConfig',
            reader: {
                type:'json',
                root: 'eimdata'
            },  
						timeout: 100000000   
        }
   });
 function onCheckItem(item,ch){
// 	  var temp_id='dhIframe_'+item.tname;
   	if(ch){   	 	 		
   	 	 onAddTree(item.tname,item.srcurl,item.text); 
   	 	 //wff
   	 	 store_m.load({params: {mname:item.text,fi_mflag: 1}});  
    }else{
      onDelTree(item.tname);
      //wff
      store_m.load({params: {mname:item.text,fi_mflag: 0}});  
    }
 }   
  var m_tid=new Array();
  var m_tname=new Array();
  var m_mflg=new Array();
  var mCou=[#me_mCou#];
  [#SLPB#]
  	m_tid[[#m_num#]]='[#me_tname#]';
  	m_tname[[#m_num#]]='[#me_mid#]';
  	m_mflg[[#m_num#]]=[#me_flag#];
  [#SLPE#]
 	function setMenuValue(){
  	  //初始或chek框      
     var tabs_tree=Ext.getCmp('panellayout'); //获取首页已显示的panel 布局id 并循环传给下面导航菜单，打钩
     setAllMenuCheckFalse();
//     tabs_tree.items.each(function(item) { 
////     	alert(item.id);
//     if(item.id=='zhfb'){
//        setMenuCheck('zhfbmenu');
//     }
//    });
		var i=0;   
    tabs_tree.items.each(function(item) { 
			 for(i=1;i<mCou;i++){//alert("tid="+m_tid[i]+"  flg="+m_mflg[i]);
			 		if(item.id==m_tid[i]&&m_mflg[i]==1){
	        	setMenuCheck(m_tname[i]);
	     		}
			 }
    });
    
    setOtherMenuDelete();
  }
  //只显示checked的panel
  function setOtherMenuDelete(){
  			 var layout=Ext.getCmp('dhMenu_tree');              //导航菜单打钩
	       layout.items.each(function(item){
		        if(item.checked==false)
		     		onDelTree(item.tname);
		      }
	      );  	
  	
// 	  		var tree_menu=Ext.getCmp('panellayout');
//	      tree_menu.items.each(function(item){	    
//	      	alert("item.tname="+item.tname+"   ck="+item.checked);  	
//	      	
//	      }
//	      ); 
	}
   function setAllMenuCheckFalse(){
 	  		var tree_menu=Ext.getCmp('panellayout');
	      tree_menu.items.each(function(item){	      	
	      	item.checked=false;
	     
	      }
	      ); 
	}
  function setMenuCheck(id){
  		   var layout=Ext.getCmp('dhMenu_tree');              //导航菜单打钩
	       layout.items.each(function(item){
	      	if(item.id==id){
	      		item.checked=true;
	        }
	      }
	      );  	
	      
	    
  }
  //综合分布下拉菜单
   var data = [['value1', '热点数量'], ['value2', '在线人数'], ['value3', '业务流量']];
        var store = new Ext.data.SimpleStore({
            fields: ['value', 'text'],
            data: data
   });
   var combo = new Ext.form.ComboBox({
            store: store,
            style:'margin-top:0px;margin-buttom:0px;margin-left:5px;margin-right:25px;height:5px;',
            emptyText: '热点数量',
            mode: 'local',
            width:80,
            triggerAction: 'all',
            displayField: 'text'
   });

   combo.on("select", function(comboBox,event, target, owner, tool) {
        		//webreplace函数重定向到Plate下界面，替换data.xml
//            alert(comboBox.getRawValue());
						if(comboBox.getRawValue()=="在线人数")
           	 	this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_1_onlineu.html"  > </iframe> </div>');
						//上面更新数据  data.xml
						else if(comboBox.getRawValue()=="在线人数")
            	this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_1_onlineu.html"  > </iframe> </div>');
						else
							this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_1.html"  > </iframe> </div>');
						//下面refresh
   });
        
  //网络服务下拉菜单
   var data_s = [['value1', '细分服务'], ['value2', '服务大类']];
   var store_s = new Ext.data.SimpleStore({
            fields: ['value', 'text'],
            data: data_s
   });
   var combo_s = new Ext.form.ComboBox({
            store: store_s,
            style:'margin-top:0px;margin-buttom:0px;margin-left:5px;margin-right:25px;height:5px;',
            emptyText: '细分服务',
            mode: 'local',
            width:80,
            triggerAction: 'all',
            displayField: 'text'
   });

   combo_s.on("select", function(comboBox,event, target, owner, tool) {
        		//webreplace函数重定向到Plate下界面，替换data.xml
//            alert(comboBox.getRawValue());
						if(comboBox.getRawValue()=="细分服务")
//           	 	this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_6_detail.html"  > </iframe> </div>');
           	 	this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_6_s.html"  > </iframe> </div>');
						else
							this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_6.html"  > </iframe> </div>');
						//下面refresh
   });
  //终端类型
  var data_term = [['value1', '总览'], ['value2', '移动设备']];
  var store_term = new Ext.data.SimpleStore({
            fields: ['value', 'text'],
            data: data_term
  });
  var combo_term = new Ext.form.ComboBox({
            store: store_term,
            style:'margin-top:0px;margin-buttom:0px;margin-left:5px;margin-right:25px;height:5px;',
            emptyText: '总览',
            mode: 'local',
            width:80,
            triggerAction: 'all',
            displayField: 'text'
   });

   combo_term.on("select", function(comboBox,event, target, owner, tool) {
        		//webreplace函数重定向到Plate下界面，替换data.xml
//            alert(comboBox.getRawValue());
						if(comboBox.getRawValue()=="移动设备")
           	 	this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_9_detail.html"  > </iframe> </div>');
						else
							this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_9.html"  > </iframe> </div>');
						//下面refresh
   });
//增加panel
    function onAddTree(lefttree,srcurl,title){
     	  var i=0;
     	  var m=0;
     var tabs_tree=Ext.getCmp('panellayout');
     tabs_tree.items.each(function(item) { 
     	if(item.id==lefttree){
     		i++;
     	}
	     	if(i==0){
	     		m++;
	     	}
	    }
	    );
		     	if(i==0){
		     			  var tabframe="dhIframe_"+lefttree;
								
							  var htmlvar='<iframe  id=\"'+tabframe+'\" name=\"'+tabframe+'\" src=\"'+srcurl+'\"  width=100% height=263  FrameBorder=0 scrolling=\"no\"></iframe>';
//								if(lefttree=="zhfb"){
							  	tabs_tree.add({
						            closable: true,
						            id:lefttree,
						            html:htmlvar,
						            tools: [ 
						            			
								       				{type: 'gear', handler: function () { 
							            						Ext.Msg.alert('提示', '配置按钮被点击。'); 
							        					  } 
							        				},
//							        				combo,
							        				{ type: 'refresh',handler:function(){  this.body.mask('正在刷新。。', 'x-mask-loading');
							                                                   // tree.root.reload();
							                                                   // tree.root.collapse(true, false);
							                                                        setTimeout(function(){ // mimic a server call
							                                                                this.body.unmask();
							                                                          //  tree.root.expand(true, true);
							                                                        }, 1000);
							                                                        }},
							        				{ type: 'maximize'}
        								],
        								collapsible:true,
        								columnWidth: 1/2,  
	    	  							style:'margin-top:5px;margin-buttom:5px;margin-left:5px;margin-right:5px;',
		//				            iconCls: 'add16',
						            title: title
						        }).show();
//						    }else if(lefttree=="netservice"){
//						    	tabs_tree.add({
//						            closable: true,
//						            id:lefttree,
//						            html:htmlvar,
//						            tools: [ 
//						            			combo_s,
//								       				{type: 'gear', handler: function () { 
//							            						Ext.Msg.alert('提示', '配置按钮被点击。'); 
//							        					  } 
//							        				},
//							        				{ type: 'refresh',handler:function(){  this.body.mask('正在刷新。。', 'x-mask-loading');
//							                                                   // tree.root.reload();
//							                                                   // tree.root.collapse(true, false);
//							                                                        setTimeout(function(){ // mimic a server call
//							                                                                this.body.unmask();
//							                                                          //  tree.root.expand(true, true);
//							                                                        }, 1000);
//							                                                        }},
//							        				{ type: 'maximize'}
//        								],
//        								collapsible:true,
//        								columnWidth: 1/2,  
//	    	  							style:'margin-top:5px;margin-buttom:5px;margin-left:5px;margin-right:5px;',
//		//				            iconCls: 'add16',
//						            title: title
//						        }).show();
//						    }else{
//						    	tabs_tree.add({
//						            closable: true,
//						            id:lefttree,
//						            html:htmlvar,
//						            tools: [ 
//								       				{type: 'gear', handler: function () { 
//							            						Ext.Msg.alert('提示', '配置按钮被点击。'); 
//							        					  } 
//							        				},
//							        				{ type: 'refresh',handler:function(){  this.body.mask('正在刷新。。', 'x-mask-loading');
//							                                                   // tree.root.reload();
//							                                                   // tree.root.collapse(true, false);
//							                                                        setTimeout(function(){ // mimic a server call
//							                                                                this.body.unmask();
//							                                                          //  tree.root.expand(true, true);
//							                                                        }, 1000);
//							                                                        }},
//							        				{ type: 'maximize'}
//        								],
//        								collapsible:true,
//        								columnWidth: 1/2,  
//	    	  							style:'margin-top:5px;margin-buttom:5px;margin-left:5px;margin-right:5px;',
//		//				            iconCls: 'add16',
//						            title: title
//						        }).show();	
//						    } 
					}
//					tabs_tree.setActiveTab(m);   	
//					tabs_tree.getLayout().setActiveItem(m);	        	
   }
   
    //删除panel
    function onDelTree(lefttree){
     	  var i=0;
     	  var m=0;
     		var tabs_tree=Ext.getCmp('panellayout');
     		tabs_tree.items.each(function(item) { 
     		if(item.id==lefttree){
	     		i++;
	     	}
		     	if(i==0){
		     		m++;
		     	}
		    }
		    );    	
     	if(i>0){    
  	   	   tabs_tree.remove(m);
     	}
   	
   }
   
    //创建首页自定义菜单
   var menu_layout = Ext.create('Ext.menu.Menu', {
        id: 'dhMenu_tree',
        style: {
            overflow: 'visible'     
        }
        ,
        items: [
        [#SLPB#]
        	{
           	    text: '[#me_mname#]',
                id:'[#me_mid#]',
                tname:'[#me_tname#]',
                srcurl:'[#me_urlnum#]',
                checked:false, 
                checkHandler:onCheckItem    
           }[#me_df#]
           [#SLPE#]

//           {
//           	    text: '<b>终端类型分布</b>',
//           	    checked:false,
//           	    srcurl:'/v4/ncs_tree_user.htm',
//                id:'termtypemenu',
//                tname:'termtype',
//                checkHandler:onCheckItem
//           }
        ]

        
        
        
    });
   
    
// 首页Panel
Ext.create('Ext.Panel', {  
//	 width: 1050,
	 height: 990, 
   id:'panellayout',
	 bodyBorder: false, 
 
	  defaults: {   
                    layout: 'anchor',   
                    defaults: {   
                        anchor: '100%'  
                    }   
                },  
	 tbar: Ext.create('Ext.toolbar.Toolbar', { 
	 	items: [
	 		{itemid:'sy',
//            srcurl:'/v4/ncs_first_right.htm',
            text: '<span style="color:#005B9A;font-size: 12px;"><b>自定义首页</b></span>',
            iconCls: 'book',
            menu:menu_layout
	 		}
//	 		"工具栏"
	 		
	 		] 
	 	
	 }),
	 autoScroll:true,
//	 title: "自定义首页",   
	 layout: {   
//	 	     		type: 'vbox',   
//	 	     		align: 'center'    
 type: 'column'   
	 	     	 },
	 renderTo: document.body,    
	 items: [
	 			
	    	 {  
	    	 	id:'sysrun',
	       	tools: [ 

        				{ type: 'refresh',handler:function(event, target, owner, tool){ 
        					this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_11.html"  > </iframe> </div>');
									}
								},
        	],
        	closable : true,
        	xtype: 'panel',      
	    	  title: '<span style="color:#005B9A;font-size: 12px;"><b>系统运行状态</b></span>',
	    	  style:'margin-top:5px;margin-buttom:5px;margin-left:5px;margin-right:5px;',
//	    	  width: 450,
					html: '<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_11.html"  > </iframe> </div>',
	    	  tname:'sysrun',
	    	  columnWidth: 1/2   
//	    	  flex: 3    
	    	 }
	 			,
	      {  
	    	 	id:'netinterface',
	       	tools: [ 
//	       				{ type: 'toggle'},
//	       				{type: 'gear', handler: function () { 
//            						Ext.Msg.alert('提示', '配置按钮被点击。'); 
//        					  } 
//        				},
        				{ 
        					type: 'refresh',handler:function(event, target, owner, tool){ 
        						this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_5.html"  > </iframe> </div>');
									}
								},
//        				{ type: 'maximize'}
//        				{ type: 'close'}
        	],
          closable : true,
//          collapsible:true, 
        	xtype: 'panel',     
	    	  title: '<span style="color:#005B9A;font-size: 12px;"><b>网络接口趋势图</b></span>',
	    	  style:'margin-top:5px;margin-buttom:5px;margin-left:5px;margin-right:5px;',
//	    	  width: 450,
					html: '<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_5.html"  > </iframe> </div>',
	    	  tname:'netinterface',
	    	  columnWidth: 1/2   
//	    	  flex: 3    
	    	 } ,
	    	  
	    	 {  
	    	 	id:'netservice',
	       	tools: [ 
//	       				{ type: 'toggle'},
								combo_s,
        				{ type: 'refresh',handler:function(event, target, owner, tool){ 
        					this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_6_s.html"  > </iframe> </div>');
									}
								},
        	],
          closable : true,
        	xtype: 'panel', 
        	tname:'netservice',    
	    	  title: '<span style="color:#005B9A;font-size: 12px;"><b>网络服务分布</b></span>',
	    	  style:'margin-top:5px;margin-buttom:5px;margin-left:5px;margin-right:5px;',
					html: '<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_6_s.html"  > </iframe> </div>',
	    	  
	    	  columnWidth: 1/2   
	    	 }  
	    	 ,
	 
	       {  
	       	id:'onlineus',
	       	tools: [ 

        				{ 
        					type: 'refresh',handler:function(event, target, owner, tool){ 
        						this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_7.html"  > </iframe> </div>');
									}
								},
        				],
        	closable : true,
        	xtype: 'panel',
	    	  title: '<span style="color:#005B9A;font-size: 12px;"><b>在线用户统计</b></span>',
					html: '<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_7.html"  > </iframe> </div>',
	    	  tname:'onlineus',
	    	  columnWidth: 1/2,  
	    	  style:'margin-top:5px;margin-buttom:5px;margin-left:5px;margin-right:5px;'
	    	 }
	    	 
	    	 ,
	    	   
	    	 {  
	    	 	id:'hotap',
	       	tools: [ 

        				{ type: 'refresh',handler:function(event, target, owner, tool){ 
        					this.up("panel").update('<div><iframe  height="275px" name="hotap_dis" scrolling="no" id="hotap_dis" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_hotap.html"  > </iframe> </div>');
									}
								},

        	],
          closable : true,
        	xtype: 'panel',     
	    	  title: '<span style="color:#005B9A;font-size: 12px;"><b>热点AP分布</b></span>',
	    	  style:'margin-top:5px;margin-buttom:5px;margin-left:5px;margin-right:5px;',
					html: '<div><iframe  height="275px" name="hotap_dis" scrolling="no" id="hotap_dis" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_hotap.html"  > </iframe> </div>',
	    	  tname:'hotap',
	    	  columnWidth: 1/2   
	    	 }
	    	 
	    	 
//	    	 ,
//	    	   
//	    	 {  
//	    	 	id:'alarm',
//	       	tools: [ 
//
//        				{ type: 'refresh',handler:function(event, target, owner, tool){ 
//        					this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_4.html"  > </iframe> </div>');
//									}
//								},
//
//        	],
//          closable : true,
//        	xtype: 'panel',     
//	    	  title: '<span style="color:#005B9A;font-size: 12px;"><b>告警</b></span>',
//	    	  style:'margin-top:5px;margin-buttom:5px;margin-left:5px;margin-right:5px;',
////	    	  width: 450,
//					html: '<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_4.html"  > </iframe> </div>',
//	    	  tname:'alarm',
//	    	  columnWidth: 1/2   
////	    	  flex: 3    
//	    	 }
	    	 /*
	    	 {  
	    	 	id:'deviceacc',
	       	tools: [ 

        				{ type: 'refresh',handler:function(event, target, owner, tool){ 
        					this.up("panel").update('<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_3.html"  > </iframe> </div>');
									}
								},
        	],
        	closable : true,
        	xtype: 'panel',      
	    	  title: '<span style="color:#005B9A;font-size: 12px;"><b>设备接入率</b></span>',
	    	  style:'margin-top:5px;margin-buttom:5px;margin-left:5px;margin-right:5px;',
//	    	  width: 450,
					html: '<div><iframe  height="275px" name="yqfb_map" scrolling="no" id="yqfb_map" width="100%"  border="0" frameborder="0" src="/index_wire_1_right1_3.html"  > </iframe> </div>',
	    	  tname:'deviceacc',
	    	  columnWidth: 1/2   
//	    	  flex: 3    
	    	 }
	    	 
	    	 ,*/
	    	
	    	
	    	  ]
	    });

setMenuValue();

});

Ext.define('FeedViewer.FeedGrid', {
    extend: 'Ext.grid.Panel',

    alias: 'widget.feedgrid',

    initComponent: function(){
        this.addEvents(
          
            'select'
        );

        Ext.apply(this, {
            cls: 'feed-grid',
            store: Ext.create('Ext.data.Store', {
                model: 'FeedItem',
                sortInfo: {
                    property: 'pubDate',
                    direction: 'DESC'
                },
                proxy: {
                    type: 'ajax',
                    url: 'feed-proxy.php',
                    reader: {
                        type: 'xml',
                        record: 'item'
                    },
                    listeners: {
                        exception: this.onProxyException,
                        scope: this
                    }
                },
                listeners: {
                    load: this.onLoad,
                    scope: this
                }
            }),
            viewConfig: {
                itemId: 'view',
                plugins: [{
                    pluginId: 'preview',
                    ptype: 'preview',
                    bodyField: 'description',
                    expanded: true
                }],
                listeners: {
                    scope: this,
                    itemdblclick: this.onRowDblClick
                }
            },
            columns: [{
                text: 'Title',
                dataIndex: 'title',
                flex: 1,
                renderer: this.formatTitle
            }, {
                text: 'Author',
                dataIndex: 'author',
                hidden: true,
                width: 200

            }, {
                text: 'Date',
                dataIndex: 'pubDate',
                renderer: this.formatDate,
                width: 200
            }]
        });
        this.callParent(arguments);
        this.on('selectionchange', this.onSelect, this);
    },

        /**
     * Reacts to a double click
     * @private
     * @param {Object} view The view
     * @param {Object} index The row index
     */
    onRowDblClick: function(view, record, item, index, e) {
        this.fireEvent('rowdblclick', this, this.store.getAt(index));
    },


    /**
     * React to a grid item being selected
     * @private
     * @param {Ext.model.Selection} model The selection model
     * @param {Array} selections An array of selections
     */
    onSelect: function(model, selections){
        var selected = selections[0];
        if (selected) {
            this.fireEvent('select', this, selected);
        }
    },

    /**
     * Listens for the store loading
     * @private
     */
    onLoad: function(store, records, success) {
        if (this.getStore().getCount()) {
            this.getSelectionModel().select(0);
        }
    },

    /**
     * Listen for proxy eerrors.
     */
    onProxyException: function(proxy, response, operation) {
        Ext.Msg.alert("Error with data from server", operation.error);
        this.view.el.update('');
        
        // Update the detail view with a dummy empty record
        this.fireEvent('select', this, {data:{}});
    },

    /**
     * Instructs the grid to load a new feed
     * @param {String} url The url to load
     */
    loadFeed: function(url){
        var store = this.store;
        store.getProxy().extraParams.feed = url;
        store.load();
    },

    /**
     * Title renderer
     * @private
     */
    formatTitle: function(value, p, record){
        return Ext.String.format('<div class="topic"><b>{0}</b><span class="author">{1}</span></div>', value, record.get('author') || "Unknown");
    },

    /**
     * Date renderer
     * @private
     */
    formatDate: function(date){
        if (!date) {
            return '';
        }

        var now = new Date(), d = Ext.Date.clearTime(now, true), notime = Ext.Date.clearTime(date, true).getTime();

        if (notime === d.getTime()) {
            return 'Today ' + Ext.Date.format(date, 'g:i a');
        }

        d = Ext.Date.add(d, 'd', -6);
        if (d.getTime() <= notime) {
            return Ext.Date.format(date, 'D g:i a');
        }
        return Ext.Date.format(date, 'Y/m/d g:i a');
    }
});



</script>
    
    
</head>
<body>
	<form name="form1" id="form1" action="/pronline/Msg">
		<input type="hidden" name="FunName" value="ncwlan_apList">
		<input type="hidden" name="groupid" value="">
		<input type="hidden" name="did" value="">
		<input type="hidden" name="ip1" value="">
		<input type="hidden" name="dispname1" value="">
		<input type="hidden" name="servicecode1" value="">
		<input type="hidden" name="groupid1" value="">		
	  <input type="hidden" name="address1" value="">
		<input type="hidden" name="area1" value="">
		<input type="hidden" name="excelflag" value="">
		<input type="hidden" name="lxstate" value="">
		<input type="hidden" name="ap_select" value="">
		<input type="hidden" name="mid" value="">
	</form>
	<table>
		<tr>
			<td with="49%">
    	<div id="grid_first"></div>
    		
  		</td>
  		<td with="49%"><div id="grid_sec"></div></td>
  	</tr>
  	<tr>
			<td with="49%">
    	<div id="grid_third"></div>
    		
  		</td>
  		<td with="49%"><div id="grid_for"></div></td>
  	</tr>
	</table>
</body>
</html>
