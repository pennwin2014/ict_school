<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>无标题文档</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Jon Eyrick" CONTENT="no-cache">
</head>
<style type="text/css">
*{
	margin:0;
	padding:0;
}
#main{
	width:900px;
	margin-left:50px;
	margin-right:50px;
	text-align:left;
}
.header_ul{
	float:right;
	margin-right:50px;
}
h1 {
	height:20px;
	line-height:20px;
	font-family:Myriadset-Thin;
	font-size:26px;
	color:#313131;
	padding-bottom:15px;
	/*border-bottom:2px solid #ced0d5;*/
}
hr{
	height:2px;
	color:ced0d5;
}
 .header_ul li{
			 list-style:none;
			 float:left;
			 display:block;
			 height:30px;
			 line-height:30px;
			 font-size:14px;	
   }
   
   #split {
		width:30px;
		text-align:center;
		color:#ced0d5;
		  
   }
   .china{
	   color:#0088CC;
	   width:30px;
	   font-family:KozGoPr6N-Regular;
	   color:#0088cc;
   }
   .china2{
	   color:#0088CC;
	   width:30px;
	   font-family:KozGoPr6N-Regular;
	   color:#0088cc;
	   text-decoration:underline;
   }
   .eng{
	   color:#000;
	   width:44px;
	   font-family:LucidaGrande;
   }
   #login_area{
	   width:500px;
	   margin-top:49px;
	   padding-left:50px;
	   font-family:LucidaGrande;
	   font-size:16pt;
	   color:#000;
   }
   .Case{
	   width:434px;
	   height:39px;
	   background-color:#f0f0f0;
	   margin-bottom:14px;
	   margin-top:14px;
	   border-radius:5px;
   }
    .Case1{
	   width:157px;
	   height:39px;
	   background-color:#f0f0f0;
	   margin-bottom:14px;
	   margin-top:14px;
	   float:left;
	   margin-right:12px;
	   border-radius:5px;
   }
   .Case2{
	   width:268px;
	   height:39px;
	   background-color:#f0f0f0;
	   margin-bottom:14px;
	   margin-top:14px;
	   float:left;
	   border-radius:5px;
   }
   .passcode{
	   width:420px;
	   height:25px;
	   border:1px solid #d0d0d0;
	   margin:6px;
	   line-height:25px;
	   font-family:HelveticaNeue;
	   font-size:14pt;
	   color:#999999;
   }
   .passcode2{
	   width:420px;
	   height:25px;
	   border:2px solid #d0d0d0;
	   margin:6px;
	   line-height:25px;
	   font-family:HelveticaNeue;
	   font-size:14pt;
	   color:#000;
   }
  .code{
	   width:143px;
	   height:25px;
	   border:1px solid #d0d0d0;
	   margin:6px;
	   line-height:25px;
	   font-family:HelveticaNeue;
	   font-size:14pt;
	   color:#999999;
	   border-radius:5px;
   }
   .code2{
	   width:143px;
	   height:25px;
	   border:1px solid #d0d0d0;
	   margin:6px;
	   line-height:25px;
	   font-family:HelveticaNeue;
	   font-size:14pt;
	   color:#000;
	   border-radius:5px;
   }
   .username{
	   width:254px;
	   height:25px;
	   border:1px solid #d0d0d0;
	   margin:6px;
	   line-height:25px;
	   font-family:HelveticaNeue;
	   font-size:14pt;
	   color:#999999;
	   border-radius:5px;
   }
   .username2{
	   width:254px;
	   height:25px;
	   border:2px solid #d0d0d0;
	   margin:6px;
	   line-height:25px;
	   font-family:HelveticaNeue;
	   font-size:14pt;
	   color:#000;
	   border-radius:5px;
   }
   .error{
	   height:0px;
	   padding-bottom:10px;
	   color:#ff0000;
   }
   .error2{
	   height:28px;
	   padding-bottom:10px;
	   font-size:14pt;
	   color:#ff0000;
	   clear:both;
   }
   .error3{
	   height:45px;
	   padding-bottom:10px;
	   font-size:14pt;
	   color:#ff0000;
	   clear:both;
   }
   .error4{
	   height:45px;
	   padding-bottom:10px;
	   font-size:14pt;
	   color:#ff0000;
	   clear:both;
   }
   .error_monum{
	   height:88px;
	   padding-bottom:10px;
	   font-size:14pt;
	   color:#ff0000;
	   clear:both;            /*zms*/
   }
   .chaccept{
	   width:14px;
	   height:14px;
   }
   .getpasscode{
	   background-image:url(/images/ap/get_passcode.png);
	   width:122px;
	   height:34px;
	   border-radius: 5px;
	   border:0;
	   float:left;
	   font-size:14pt;
	   margin-bottom:10px;
	   margin-right:12px;
	   border-radius:5px;
   }
   .getpasscode_no{
	   background-image:url(/images/ap/passcode_sentpceng.png);
	   width:122px;
	   height:34px;
	   border:0;
	   float:left;
	   margin-bottom:10px;
	   margin-right:12px;
	   border-radius:5px;
   }
   .no_sign{
	   background-image:url(/images/ap/register_hui.png);
	   width:122px;
	   height:34px;
	   border:0;
	   border-radius: 5px;
   }
    .sign{
	   background-image:url(/images/ap/register.png);
	   width:122px;
	   height:34px;
	   border:0;
	   font-size:14pt;
	   border-radius: 5px;
   }
  .font_style a{
	  color:#0088cc;
	  text-decoration:none;
  }
  a:hover{
	  text-decoration:underline;
  }
  a:link {
  color:#0088cc;
  }
   .space1{
   height:30px;
   }
    .space2{
   height:35px;
   }
    .space3{
   height:40px;
   }
    .space3{
   height:11px;
   }
  a:link {
  color:#0088cc;
  }
 
   .font_style{
	   font-family:LucidaGrande;
	   font-size:14pt;
	   color:#333333;
   }
    .font_style2{
	   font-family:LucidaGrande;
	   font-size:12pt;
	   color:#999999;
   }
   
   .mesgctrl{
   	  width:400px;
	   height:39px;
	   font-family:LucidaGrande;
	   font-size:11pt;
	   color:#999999;
	   
   }
   
   .mesgpass{
   	 width:270px;
	   height:39px;
	   font-family:LucidaGrande;
	   font-size:10pt;
	   color:#999999;
	   margin-left:25px;
	   float:left;
	   margin-bottom:10px;
   }
   .stsec{
	   width:400px;
   }
</style>
<script language="javascript" type="text/javascript">
	 	
  function createXMLHttpRequest() {
		  var C=null;
			if(window.XMLHttpRequest) { 
				C = new XMLHttpRequest();
			}
			else if (window.ActiveXObject) { 
				try {
					C = new ActiveXObject("Msxml2.XMLHTTP");
				} catch (e) {
					try {
						C = new ActiveXObject("Microsoft.XMLHTTP");
					} catch (e) {}
				}
			}
			return C;
	}
	
	function getxmlbyname(ins,names,namee){
		var start;
		var end;
		var ret='';
	
		start=ins.indexOf(names);
		end=ins.indexOf(namee);
		
		if(start!=-1&&end!=-1){
			ret=ins.substr(start+names.length,end-start-names.length);
		}
		return ret;	
	}
 var statcode= null;
 var errmessage= null;  
 var xmlHttp = false;

 function callServer(){ 
   if( xmlHttp && xmlHttp .readyState != 0 ){
    	xmlHttp.abort();
   }
   xmlHttp = createXMLHttpRequest();
   if(xmlHttp){
     var web_url="https://[#ip#]:[#port#]/pronline/Msg?FunName@ncSrvGetPass&lang@[#lang#]&username@"+document.getElementById("nclogin").username.value+"&xx@"+Math.random()*999;
   
    xmlHttp.open("GET",web_url, true);
    xmlHttp.onreadystatechange = updatePage;
    xmlHttp.send(null);
   }
 }


 function updatePage(){
   if (xmlHttp.readyState == 4){ 
   	
      var response = xmlHttp.responseText;
		  var temp_num = getxmlbyname(response,"<statusCode>","</statusCode>");
    	statcode=parseInt(temp_num);

      var temp_mesg = getxmlbyname(response,"<statusId>","</statusId>");
    	errmessage = temp_mesg;
    	
//   	alert(response);
      var htmltest = errmessage;

      if(statcode == 5){
			  if (errmessage == 1)            //错误不灰
			  {
			  	document.getElementById('username_err').className = 'error2';
					document.getElementById("username_err").innerHTML = "<img src = '/images/ap/mark01.png' >&nbsp;Please enter a valid mobile number. ";  
			    document.getElementById("gpss").disabled="";
			    document.getElementById('gpss').className = 'getpasscode';
			    document.getElementById('passmesg').innerHTML = "";
			  }
      }
      if(statcode == 0){               //正确灰掉  
      	   document.getElementById('username_err').className = 'error';
      }   
	  
//      if(statcode == 1){
//      	document.getElementById("username_err").innerHTML =htmltest;
//      }
//      if(statcode == 2){
//      	document.getElementById("chaccept_err").innerHTML =htmltest;
//      }
//      if(statcode == 3){
//      	document.getElementById("err").innerHTML =htmltest;
//      }
//
   }
 }	
var couflag = 0 ;
function passcode(){
	  document.getElementById('err5').className = 'error';
    document.getElementById("err5").innerHTML = "";
		document.getElementById('password').className='passcode2';
		if(couflag == 0)
		{
		  document.getElementById('sign').disabled = false;
		  couflag++;
		}
		document.getElementById('sign').className = 'sign';
		
//		document.getElementById('sign').onclick = spylogin();
	
}
function ncPortalCheckMobileNumBer(pInarea,pInphone)
{
    var caOut = "";
    var caIn = "";
    var caInph = "";
    var i = 0;
    var j = 0;
    if(pInarea == "Country code")
    {
       pInarea = ""; 	
    }
    for (i = 0 ;i < pInarea.length;i++) 
    {
    	 if(pInphone.charAt(i) == '0' && i == 0)
    	 {
    	 }
    	 else
    	 {
	    	 if(pInarea.charAt(i) == '+' || pInarea.charAt(i) == '-' || pInarea.charAt(i) == ' ')
	    	 {
	    	 
	    	 }
	    	 else
	    	 {
	    	 	  if (i == 0)
	    	 	  {
	    	 	     	caIn = pInarea.charAt(i);
	    	 	     	
	    	 	  }
	    	 	  else
	    	 	  {
	    	 	      caIn += pInarea.charAt(i);	
	    	 	  }
	    	 }
    	 }
    }

    for (i = 0 ;i < pInphone.length;i++) 
    {
    	 
    	 if(pInphone.charAt(i) == '0' && i == 0)
    	 {
    	 }
    	 else
    	 {
	    	 if(pInphone.charAt(i) == '+' || pInphone.charAt(i) == '-' || pInphone.charAt(i) == ' ')
	    	 {
	    	 	
	    	 }
	    	 else
	    	 {
	    	 	  if (i == 0)
	    	 	  {
	    	 	     	caInph = pInphone.charAt(i);
	    	 	     	
	    	 	  }
	    	 	  else
	    	 	  {
	    	 	      caInph += pInphone.charAt(i);	
	    	 	  }	
	    	 }
    	 }
    }

    if(pInarea == 86)
    {
    	caOut = caInph;
    }
    else
    {
    	caOut = caIn + caInph;
    }
    return caOut;
}	   
function spylogin(){
	couflag = 0;
	document.getElementById('username_err').innerHTML = "";
	document.getElementById('chaccept_err').innerHTML = "";
	document.getElementById('err5').className = 'error';
  document.getElementById("err5").innerHTML = "";
	var aa =document.getElementById("code").value;	
  var bb =document.getElementById("usernametmp").value;	
  var cc =  ncPortalCheckMobileNumBer(aa,bb);
  document.getElementById("username").value = cc ;
  if (isNaN(cc))
  {
    	document.getElementById('username_err').className = 'error2';
			document.getElementById('username_err').innerHTML = '<img src = "/images/ap/mark01.png" >&nbsp;Please enter a valid mobile number. ' 	
  		return;
  }

	if(document.getElementById("usernametmp").value!=""&&document.getElementById("usernametmp").value!='Mobile number'&&document.getElementById('chaccept').checked)
	{
		document.getElementById("nclogin").submit();
	}
	
	else if (document.getElementById("usernametmp").value==""||document.getElementById("usernametmp").value=='Mobile number'){
		//window.alert("Please fill in your phone number and password!");
		document.getElementById('username_err').className = 'error2';
		document.getElementById('username_err').innerHTML = '<img src = "/images/ap/mark01.png" >&nbsp;Please enter a valid mobile number.';
		return ;
	}
	else if(!document.getElementById('chaccept').checked){
		document.getElementById('chaccept_err').className = 'error3';
		document.getElementById('chaccept_err').innerHTML = '<img src = "/images/ap/mark01.png" >&nbsp;Please accept the Terms and Conditions.'
		return ;
	}
	
}
function ss(e){
	var key = window.event ? e.keyCode:e.which;

	if(key==13)
		spylogin();
	}
	var p_flag='1';
function restore(){
  document.getElementById("gpss").disabled="";
  document.getElementById('gpss').className = 'getpasscode';
  document.getElementById('passmesg').innerHTML = "";
}

function chk(tel)
{
				if(/^1\d{10}$/g.test(tel)||(/^1\d{11}$/g.test(tel)))
        {
           return 0;
        }
				else
        {
          return 1;
        }
}

function getpasswd(){	
	document.getElementById('username_err').innerHTML = "";
	document.getElementById('chaccept_err').innerHTML = "";
  	
		  document.getElementById('err5').className = 'error';
		  document.getElementById("err5").innerHTML = "";
//   if(p_flag=='0') return false;
   

	  if(document.getElementById("nclogin").usernametmp.value==''||document.getElementById("usernametmp").value=='Mobile number'){
	  	document.getElementById('username_err').className = 'error2' ;
			document.getElementById('username_err').innerHTML = '<img src = "/images/ap/mark01.png" >&nbsp;Please enter a valid mobile number.';
			return false;
	  }
	  
//		var telno=document.getElementById("nclogin").usernametmp.value;
		var telno=  ncPortalCheckMobileNumBer(document.getElementById("code").value,document.getElementById("nclogin").usernametmp.value);
  
		if(telno.length<6 || isNaN(telno)){
			document.getElementById('username_err').className = 'error2';
			document.getElementById('username_err').innerHTML = '<img src = "/images/ap/mark01.png" >&nbsp;Please enter a valid mobile number. '
			return false;
		} 
	 
	  var temp_value;

		temp_value = document.getElementById('usernametmp').value;
		//temp_value = telno;
		if(document.getElementById('code').value!='' && document.getElementById('code').value != "Country code")
		{
		 	 	temp_value = '0'+document.getElementById('code').value+'-'+document.getElementById('usernametmp').value;
		}

		 document.getElementById("nclogin").username.value = temp_value;
	//	 alert(document.getElementById("nclogin").username.value);
		
		document.getElementById('gpss').className = 'getpasscode_no';
		document.getElementById('passmesg').innerHTML = "If you do not receive a passcode, please wait at least a minute before trying again.";
    document.getElementById("gpss").disabled="true";
    setTimeout('restore()',60000);
		 
	  callServer();
	  
	  //temp_html="http://[#ip#]:[#port#]/pronline/Msg?FunName@ncSrvGetPass&lang@[#lang#]&username@"+document.getElementById("nclogin").username.value;
		  
     // document.getElementById("ifhide").src=temp_html;

	  //document.getElementById("imgm").src='/images/authimage/donghua.gif';
//      document.getElementById("gpss").disabled="true";
     // document.getElementById("imgm").style.display="";
 //     p_flag='0';

//      setTimeout('restore()',50000);
//		  return false;
		
		
	}
	
	 function changlogin(flag){
            self.location='https://[#ip#]:[#port#]/pronline/Msg?FunName@ncSrvDispLogin&lang@'+flag+'&[#getarg#]';
   }
function china(){
	document.getElementById('chinese').className = 'china2'
}
function clearcValue(){
	if(document.getElementById('code').className=='code'){
		document.getElementById('code').value='';
	}
}
function clearuValue(){
	if(document.getElementById('usernametmp').className=='username'){
		document.getElementById('usernametmp').value='';
	}
	
}
function clearpValue(){
	if(document.getElementById('password').className=='passcode'){
		document.getElementById('password').value='';
	}
}
function init()
{
//	alert('[#statusCode#]');
	document.getElementById('sign').disabled ='ture';
	if('[#statusCode#]' == 3)
	{
		  document.getElementById('err').className = 'error4';
	    document.getElementById("err").innerHTML ="<img src = '/images/ap/mark01.png' >Sorry, there is a problem. Please try again another time.";  	
	}	
	if('[#statusCode#]' == 5)
	{

		  document.getElementById('err5').className = 'error4';
	    document.getElementById("err5").innerHTML ="<img src = '/images/ap/mark01.png' >&nbsp;Please enter the exact passcode that was sent to the mobile number above.";  	
	}	
//	alert(" lang=" + "[#lang#]");
var tmpflag =0 ;
	if('[#lang#]' == 'eng')
	{
		if('[#usernametmp#]' == '手机号码')
		{
			document.getElementById("usernametmp").value = 'Mobile number';
			document.getElementById('usernametmp').className = 'username';
			tmpflag =1 ;
		}
		if('[#code#]' == '国家代码')
		{
			document.getElementById("code").value = 'Country code';
			document.getElementById('code').className = 'code';
			tmpflag =2 ;
		}
		if(tmpflag == 1 || tmpflag == 2)
		{
		  tmpflag =0 ;
		  return;
	  }
	}
	if('[#lang#]' == 'eng')
	{
	if('[#usernametmp#]' != '' && '[#usernametmp#]' != 'Mobile number')
	{
		document.getElementById("usernametmp").value = '[#usernametmp#]';
		document.getElementById('usernametmp').className = 'username2';
	}
	if('[#usernametmp#]' == 'Mobile number')
	{
		document.getElementById("usernametmp").value = 'Mobile number';
		document.getElementById('usernametmp').className = 'username';
	}
//	alert("[#code#]"+ " username =" +"[#usernametmp#]" +" lang=" + "[#lang#]");
	if('[#code#]' != '' && '[#code#]' != 'Country code')
	{
		document.getElementById("code").value = '[#code#]';
		document.getElementById('code').className = 'code2';
	}
	if('[#code#]' == 'Country code')
	{
		document.getElementById("code").value = 'Country code';
		document.getElementById('code').className = 'code';
	}
}
}

function openpage(flag)
{
	var temp;
	temp="https://[#ip#]:[#port#]/pronline/Msg?FunName@ncSrvPlate&lang@"+flag+"&code@"+document.getElementById("code").value+"&usernametmp@"+document.getElementById("usernametmp").value+"&html@"+"/login_pcexplaineng.htm&[#getarg#]";
	self.location = temp;	
//	window.open(temp,'','fullscreen=yes','toolsbar=yes');
}
</script>
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onload="init();">
<form id="nclogin" name="nclogin" id="nclogin" method="post" action="[#posturl#]">
	<input type = "hidden" name = "username" id = "username" value= "" />
         [#postarg#]
<center> 
	<div height = "40px">&nbsp;</div>
	<div height = "40px">&nbsp;</div>
 <div id="main">
    <ul class="header_ul">
        <li class="china" id="chinese" onClick="changlogin('zh')" onmouseover="china();" >中文</li>
        <li id="split">|</li>
        <li class="eng" id="english" >English</li>
    </ul>
  <!--  <h1>Welcome to the Apple Store.</h1>    onClick="changlogin('eng')" onmouseover="eng();"   -->
    <div height= "19px" style = "margin-left:50px">
     <img src="/images/ap/apple_store_pceng.png"  style="margin-bottom:10px;" />
    </div>

   <div style = "border-bottom:solid 1px #999999;"></div>
    <div id="login_area">
        <p >
         To enjoy the free WLAN network at the Apple Store, please register your device using your cell phone.
        </p>
        <div class="space1"></div>
        <h4 class="font_style">1. Get a Passcode.</h4>
        <p class="font_style">
          Enter your mobile number and click Get Passcode. We’ll text a code to your cell phone.
        </p>
        <div> 
        	<div  class="Case1"><input type="text" id="code" name="code" class="code" value="Country code" onfocus="clearcValue();"  onkeyup="this.className='code2'"    /></div>     
            <div  class="Case2"><input type="text" id="usernametmp" name="usernametmp" value="Mobile number"  onfocus="clearuValue();" class="username" onkeyup="this.className='username2'" /></div>
        </div>
        <div id="username_err" class="error"></div>
       
         <div  >
	         <div><input type="button" id="gpss" class="getpasscode" onClick="getpasswd()"></div>
	         <div id = "passmesg" class = "mesgpass" ></div>
         </div>
  
           
         <div class="space2"></div>
         
         <div id = "secstyle" class = "stsec">
        <h4 class="font_style">2. Register your device.</h4>
        <p class="font_style">
            Enter the passcode you received, then click Register. 
        </p>
      </div>
        <div class="Case">
        	<input type="text" id="password" name="password" value="Passcode" class="passcode" onKeyPress="ss(event)" onfocus="clearpValue();" onkeyup="passcode();" >
        </div>
        <div id="err5"></div>
        <div class="space2"></div>
		<div class = "font_style2">
			Please read this carefully.  Your use of the Wireless Local Area Network (WLAN) is subject to the <a href="#xxx" onclick="openpage('eng');">Terms and Conditions</a> listed.  You may use the WLAN only upon agreeing to these Terms and Conditions. </br></br>

Using the wireless service to access the Internet is unsecured. It is your sole responsibility to ensure the use of the WLAN is in full compliance with any applicable laws and regulations. Apple assumes no obligation to monitor your use of the WLAN , but China Telecom or Apple may be required to access the information and provide assistance in disclosing such user information for purposes of law enforcement or pursuant to judicial or other governmental order or request.


			<!--
			
			Please read this carefully.  Your use of the Wi-Fi Service is subject to the <a href="#xxx" onclick="openpage('eng');">Terms and conditions</a> listed below.  You may only use the Wi-Fi Service upon agreeing to these terms and conditions. <br><br>
Using the wireless service to access to Internet is unsecured. It is your sole responsibility to ensure the use of the Wi-Fi Service is in full compliance with any applicable laws and regulations. Apple assumes no obligation to monitor your use of the Wi-Fi Service, but China Telecom or Apple may be required to access the information and provide assistance in disclosing such user information for purposes of law enforcement or pursuant to judicial or other governmental order or request.
		-->
		</div>
		<div class="space1"></div>
        <p class="font_style">
       		<span><input type="checkbox" id="chaccept" class="chaccept" style="zoom:150%"   />&nbsp;I have read and agree to the Terms and Conditions of the Apple WLAN Network.
            </span>
        </p>
        <div id="chaccept_err" class="error"></div>
        
        <input type="button" class="no_sign" id="sign" onclick="spylogin();">
        <div id="err"></div>
        <div class="space3">&nbsp;</div>
    </div>
    <div style=" width:964px; float:right;">
    </div>
</div>
</center>
<iframe style="display:none;" id="ifhide" name="ifhide" src="" scrolling="no" width=0 height=0  FrameBorder=0></iframe>
</form>
</body>
</html>
